<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Výpočet prodeje – vánoční stromky</title>
<style>
:root{
  --bg:#06140e; --text:#e8f5ee; --muted:#9bc7b2;
  --card:#0a1c14; --line:#133322;
  --btn:#0e2a1d; --btn-accent:#29c374; --btn-accent-2:#1ea663;
  --btn-plus:#1fb56a; --btn-minus:#10281d;
}
*{box-sizing:border-box}
html,body{background:var(--bg); color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif; margin:0}

/* ---- KARTY (souhrn nahoře) – vzhled jako dřív ---- */
.card{background:var(--card); border-radius:14px; padding:1rem; margin:1rem;}
.grid-cards{display:grid; gap:12px; grid-template-columns:repeat(3,1fr);}
.stat{background:#0d261b; border-radius:12px; padding:.9rem 1rem;}
.stat h3{margin:0 0 .25rem; font-size:1rem; color:var(--muted); font-weight:600;}
.stat .val{margin:0; font-weight:800; font-size:1.35rem}

/* ---- TABULKA – původní desktop layout ---- */
.table-wrap{overflow-x:auto;}
.items-table{display:grid; grid-template-columns:10% 1fr 15% 20% 20%; border-radius:12px; overflow:hidden;}
.items-table .row{display:contents;}
.cell{padding:10px 10px; border-top:1px solid var(--line);}
.head{font-weight:800; background:#123123;}
.cell.id{text-align:center;}
.cell.name{text-align:left; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;}
.cell.price,.cell.qty{text-align:center; white-space:nowrap;}
.cell.total{text-align:left; white-space:nowrap}

/* FULL-ROW BARVENÍ (jako na 1. screenu) */
.row.smrk  .cell{background:#e6f5e914;}
.row.bor   .cell{background:#e0f2e614;}
.row.jedle .cell{background:#dff6ea14;}
.row.kvet  .cell{background:#e6f1fb14;}

/* ---- Ovládání množství – vzhled + / − jako na 1. screenu ---- */
.qty-controls{display:inline-flex; align-items:center; gap:.45rem;}
.qty-controls .btn{
  width:38px; height:38px; border:0; border-radius:12px;
  color:#fff; font-size:1.05rem; font-weight:800; display:inline-grid; place-items:center;
}
.qty-controls .btn.minus{background:var(--btn-minus);}
.qty-controls .btn.plus{background:var(--btn-plus);}
.qty-controls .btn:active{transform:translateY(1px)}
.qty-controls input[type="number"]{
  width:78px; padding:.4rem .5rem; text-align:center;
  border-radius:10px; border:1px solid var(--line); background:#fff; color:#111; font-weight:700;
  -moz-appearance:textfield;
}
.qty-controls input[type=number]::-webkit-outer-spin-button,
.qty-controls input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none; margin:0}

/* ---- Skrytí “Eur” v řádcích; v hlavičce zůstává ---- */
.row .eur, .row .unit, .row .sub{display:none !important;}

/* ---- RESPONSIVE – jen zmenšujeme, nic nepřekreslujeme ---- */
/* větší tablety – lehké zúžení číselných sloupců */
@media (max-width: 1200px){
  .items-table{grid-template-columns:9% 1fr 14% 18.5% 18.5%;}
}

/* tablety/menší laptopy */
@media (max-width: 992px){
  .grid-cards{grid-template-columns:repeat(2,1fr);}
  .items-table{grid-template-columns:8.5% 1fr 14% 18% 18%;}
  .cell{padding:9px 8px;}
  .qty-controls .btn{width:36px; height:36px; border-radius:11px;}
  .qty-controls input[type="number"]{width:72px;}
}

/* telefony – stále JEDEN ŘÁDEK, priorita pro název; kompaktnější +/−/input */
@media (max-width: 640px){
  .grid-cards{grid-template-columns:1fr;}
  .items-table{
    grid-template-columns:
      minmax(2.6ch,8.2%)     /* ID – nejmenší, ale čitelné */
      minmax(130px,1fr)      /* Název – bere zbytek */
      minmax(7ch,14.2%)      /* Cena */
      minmax(8.6ch,17.5%)    /* Kusy (ovládání) */
      minmax(8.6ch,18.5%);   /* Suma */
  }
  .cell{padding:8px 6px; font-size:.95rem;}
  .qty-controls{gap:.32rem;}
  .qty-controls .btn{width:30px; height:30px; border-radius:9px; font-size:1rem;}
  .qty-controls input[type="number"]{width:56px; font-size:.95rem;}
}

/* extra úzké telefony – raději dovol horizontální posuv než lámat řádky */
@media (max-width: 360px){
  .items-table{min-width:340px;}
}

/* Focus highlight jako dřív */
.row:has(.qty-controls input:focus) .cell{outline:2px solid var(--btn-accent-2); outline-offset:-2px;}

</style>


</head>
<body>
<div class="wrap">
  <h1>Dnešní prodej</h1>

  <!-- SOUHRN NAHOŘE -->
  <div class="card">
    <div class="kpis">
      <div class="kpi">
        <h3>Dnešní prodej</h3>
        <div class="v mono" id="todaySales">0,00 Eur</div>
      </div>
      <div class="kpi">
        <h3>Odevzdat do obálky</h3>
        <div class="v mono" id="envelope">0,00 Eur</div>
      </div>
      <div class="kpi">
        <h3>Co zůstává dnes prodejci</h3>
        <div class="v mono" id="sellerKeep">0,00 Eur</div>
      </div>

      <div class="kpi">
        <h3>Počet prodaných stromů</h3>
        <div class="v mono" id="cntStromy">0</div>
      </div>
      <div class="kpi">
        <h3>Počet prodaných květináčů</h3>
        <div class="v mono" id="cntKvetinace">0</div>
      </div>
      <div class="kpi">
        <h3>Počet prodaných stojanů</h3>
        <div class="v mono" id="cntStojany">0</div>
      </div>
      <div class="kpi">
        <h3>Počet prodaných služeb</h3>
        <div class="v mono" id="cntSluzby">0</div>
      </div>
    </div>
  </div>

  <!-- TABULKA B…AI -->
  <div class="card">
    <div class="section-title">Seznam položek (B…AI)</div>
    <table class="table" id="tbl">
      <thead>
        <tr>
          <th class="col-id">ID</th>
          <th class="col-name">Název</th>
          <th class="col-price">Cena za kus (Eur)</th>
          <th class="col-qty">Prodané kusy</th>
          <th class="col-sum">Celková suma (Eur)</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>
</div>

<script>
/* ====== POMOCNÉ FORMÁTOVÁNÍ (cs-CZ) ====== */
const fmtNum = (n)=> new Intl.NumberFormat('cs-CZ',{minimumFractionDigits:2,maximumFractionDigits:2}).format(n||0);
const fmtEur = (n)=> `${fmtNum(n)} Eur`;   // používá se jen v KPI a souhrnech

/* ===========================================================
   CONFIG – ceník a klasifikace
   - Služby: Frézování (AE) + Síto/Balení (AF) – obě jdou prodejci
   - Doplňek (ne služba): Treefood (AI)
   =========================================================== */
const ITEMS = [
  /* Stromy */
  { id:'B',  name:'Smrek B',             price:23.60, cat:'smrk' },
  { id:'C',  name:'Smrek C',             price:39.90, cat:'smrk' },

  { id:'D',  name:'Borovice D',          price:29.90, cat:'borovice' },
  { id:'E',  name:'Borovice E',          price:39.90, cat:'borovice' },
  { id:'F',  name:'Borovice F',          price:49.90, cat:'borovice' },
  { id:'G',  name:'Borovice G',          price:59.90, cat:'borovice' },

  { id:'H',  name:'Jedľa Akcia H',       price:16.50, cat:'jedle' },
  { id:'I',  name:'Jedľa Akcia I',       price:23.30, cat:'jedle' },
  { id:'J',  name:'Jedľa Akcia J',       price:29.90, cat:'jedle' },
  { id:'K',  name:'Jedľa Akcia K',       price:36.40, cat:'jedle' },
  { id:'L',  name:'Jedľa Akcia L',       price:43.40, cat:'jedle' },
  { id:'M',  name:'Jedľa Nordmann M',    price:49.90, cat:'jedle' },
  { id:'N',  name:'Jedľa Nordmann N',    price:59.90, cat:'jedle' },
  { id:'O',  name:'Jedľa Premium O',     price:71.50, cat:'jedle' },
  { id:'P',  name:'Jedľa Premium P',     price:85.50, cat:'jedle' },
  { id:'Q',  name:'Jedľa Premium Q',     price:99.50, cat:'jedle' },
  { id:'R',  name:'Jedľa Premium R',     price:135.00, cat:'jedle' },
  { id:'S',  name:'Jedľa Premium S',     price:165.00, cat:'jedle' },

  /* Květ / Květináče */
  { id:'T',  name:'Květ T',              price:36.40, cat:'kvetinac' },
  { id:'Z',  name:'Kvetináč Z',          price:43.40, cat:'kvetinac' },
  { id:'AA', name:'Kvetináč AA',         price:49.90, cat:'kvetinac' },

  /* Stojany */
  { id:'U',  name:'Stojan U',            price:34.00, cat:'stojan' },
  { id:'V',  name:'Stojan V',            price:46.00, cat:'stojan' },
  { id:'W',  name:'Stojan W',            price:52.00, cat:'stojan' },
  { id:'X',  name:'Stojan X',            price:65.00, cat:'stojan' },
  { id:'Y',  name:'Stojan Y',            price:83.00, cat:'stojan' },

  /* Doplňky + služby uvnitř B..AI */
  { id:'AB', name:'Haluz AB',            price:3.90,  cat:'haluzimelo' },
  { id:'AC', name:'Haluz AC',            price:4.90,  cat:'haluzimelo' },
  { id:'AD', name:'Imelo AD',            price:2.90,  cat:'haluzimelo' },

  /* SLUŽBY: Frézování + Balení/Síto (obojí jde prodejci) */
  { id:'AE', name:'Frézování AE',        price:1.90,  cat:'sluzby', toSeller:true },
  { id:'AF', name:'Síto (balení) AF',    price:1.90,  cat:'sluzby', toSeller:true },

  { id:'AG', name:'Kusy AG',             price:1.90,  cat:'kusy' },
  { id:'AH', name:'Akce AH',             price:12.90, cat:'akce' },
  { id:'AI', name:'Treefood (hnojivo) AI', price:1.50, cat:'treefood' }  /* doplněk, NE služba */
];

/* ======== UI ======== */
const tbody = document.getElementById('tbody');

const todaySalesEl = document.getElementById('todaySales');
const envelopeEl   = document.getElementById('envelope');
const keepEl       = document.getElementById('sellerKeep');

const cntStromyEl    = document.getElementById('cntStromy');
const cntKvetinaceEl = document.getElementById('cntKvetinace');
const cntStojanyEl   = document.getElementById('cntStojany');
const cntSluzbyEl    = document.getElementById('cntSluzby');

const qty = {};     // id -> kusy (B..AI)

function trClass(cat){
  return ({
    smrk:'row-smrk',
    borovice:'row-borovice',
    jedle:'row-jedle',
    kvetinac:'row-kvetinac',
    stojan:'row-stojan',
    haluzimelo:'row-haluzimelo',
    sluzby:'row-sluzby',
    kusy:'row-kusy',
    akce:'row-akce',
    treefood:'row-treefood'
  })[cat] || '';
}

/* Ovládání počtu kusů s + / - a ručním vstupem (jen čísla, >= 0) */
function qtyControl(initial, onChange){
  const wrap = document.createElement('div');
  wrap.className = 'qtyctrl';
  const minus = document.createElement('button'); minus.className='btn minus'; minus.textContent='−';
  const inp = document.createElement('input'); inp.className='qty mono'; inp.type='text'; inp.value=initial; inp.inputMode='numeric';
  const plus = document.createElement('button'); plus.className='btn plus'; plus.textContent='+';

  function clean(v){ v=(v+'').replace(/[^\d]/g,''); return Math.max(0, parseInt(v||'0',10)); }
  function set(n){ inp.value=n; onChange(n); }

  minus.onclick=()=> set(Math.max(0, clean(inp.value)-1));
  plus.onclick =()=> set(clean(inp.value)+1);
  inp.addEventListener('input', ()=> set(clean(inp.value)));
  wrap.append(minus, inp, plus);
  return wrap;
}

function addRow(parent, cells){
  const tr=document.createElement('tr');
  tr.innerHTML=cells;
  parent.appendChild(tr);
  return tr;
}

function build(){
  tbody.innerHTML = '';
  ITEMS.forEach(it=>{
    qty[it.id]=0;
    const tr = addRow(tbody, `
      <td class="col-id"><span class="rowid mono">${it.id}</span></td>
      <td class="col-name">${it.name}</td>
      <td class="col-price mono">${fmtNum(it.price)}</td>
      <td class="col-qty" data-qty></td>
      <td class="col-sum mono" data-sum>${fmtNum(0)}</td>
    `);
    tr.className = trClass(it.cat);

    const qtyCell = tr.querySelector('[data-qty]');
    const sumCell = tr.querySelector('[data-sum]');
    qtyCell.appendChild(qtyControl(0, n=>{
      qty[it.id]=n;
      sumCell.textContent = fmtNum(n*it.price);   // << bez "Eur" v řádku
      recalc();
    }));
  });
}

function recalc(){
  let total=0, owner=0, seller=0;
  let cStromy=0, cKv=0, cSt=0, cSvc=0;

  ITEMS.forEach(it=>{
    const n = qty[it.id]||0;
    const sub = n * it.price;
    total += sub;

    if(it.toSeller){ seller += sub; cSvc += n; } else { owner += sub; }

    if (['smrk','borovice','jedle'].includes(it.cat)) cStromy += n;
    else if (it.cat==='kvetinac') cKv += n;
    else if (it.cat==='stojan')   cSt += n;
  });

  todaySalesEl.textContent = fmtEur(total);
  envelopeEl.textContent   = fmtEur(owner);
  keepEl.textContent       = fmtEur(seller);

  cntStromyEl.textContent    = String(cStromy);
  cntKvetinaceEl.textContent = String(cKv);
  cntStojanyEl.textContent   = String(cSt);
  cntSluzbyEl.textContent    = String(cSvc);
}

build();
recalc();
</script>
</body>
</html>



